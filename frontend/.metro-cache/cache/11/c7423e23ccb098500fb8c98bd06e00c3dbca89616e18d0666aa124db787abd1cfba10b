{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({});\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadToken();\n    }, []);\n    const loadToken = async () => {\n      try {\n        const savedToken = await AsyncStorage.default.getItem('auth_token');\n        if (savedToken) {\n          const res = await fetch(`${BACKEND_URL}/api/auth/me`, {\n            headers: {\n              'Authorization': `Bearer ${savedToken}`\n            }\n          });\n          if (res.ok) {\n            const userData = await res.json();\n            setUser(userData);\n            setToken(savedToken);\n          } else {\n            await AsyncStorage.default.removeItem('auth_token');\n          }\n        }\n      } catch (e) {\n        console.log('Load token error:', e);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const res = await fetch(`${BACKEND_URL}/api/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) {\n        const err = await res.json();\n        throw new Error(err.detail || 'Login failed');\n      }\n      const data = await res.json();\n      await AsyncStorage.default.setItem('auth_token', data.token);\n      setToken(data.token);\n      setUser(data.user);\n    };\n    const register = async (name, email, password) => {\n      const res = await fetch(`${BACKEND_URL}/api/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name,\n          email,\n          password,\n          role: 'trainer'\n        })\n      });\n      if (!res.ok) {\n        const err = await res.json();\n        throw new Error(err.detail || 'Registration failed');\n      }\n      const data = await res.json();\n      await AsyncStorage.default.setItem('auth_token', data.token);\n      setToken(data.token);\n      setUser(data.user);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    return (0, _react.useContext)(AuthContext);\n  };\n  _s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":134,"map":[[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"AuthProvider"],[15,22,27,0],[15,25,27,0,"AuthProvider"],[15,37,27,0],[16,2,103,0,"Object"],[16,8,103,0],[16,9,103,0,"defineProperty"],[16,23,103,0],[16,24,103,0,"exports"],[16,31,103,0],[17,4,103,0,"enumerable"],[17,14,103,0],[18,4,103,0,"get"],[18,7,103,0],[18,18,103,0,"get"],[18,19,103,0],[19,6,103,0],[19,13,103,0,"useAuth"],[19,20,103,0],[20,4,103,0],[21,2,103,0],[22,2,103,53],[22,6,103,53,"_expoVirtualEnv"],[22,21,103,53],[22,24,103,53,"require"],[22,31,103,53],[22,32,103,53,"_dependencyMap"],[22,46,103,53],[23,2,1,0],[23,6,1,0,"_react"],[23,12,1,0],[23,15,1,0,"require"],[23,22,1,0],[23,23,1,0,"_dependencyMap"],[23,37,1,0],[24,2,2,0],[24,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[24,42,2,0],[24,45,2,0,"require"],[24,52,2,0],[24,53,2,0,"_dependencyMap"],[24,67,2,0],[25,2,2,0],[25,6,2,0,"AsyncStorage"],[25,18,2,0],[25,21,2,0,"_interopDefault"],[25,36,2,0],[25,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[25,73,2,0],[26,2,2,69],[26,6,2,69,"_reactJsxDevRuntime"],[26,25,2,69],[26,28,2,69,"require"],[26,35,2,69],[26,36,2,69,"_dependencyMap"],[26,50,2,69],[27,2,4,0],[27,8,4,6,"BACKEND_URL"],[27,19,4,17],[27,22,4,17,"_expoVirtualEnv"],[27,37,4,17],[27,38,4,17,"env"],[27,41,4,17],[27,42,4,17,"EXPO_PUBLIC_BACKEND_URL"],[27,65,4,55],[28,2,25,0],[28,8,25,6,"AuthContext"],[28,19,25,17],[28,35,25,20],[28,39,25,20,"createContext"],[28,45,25,33],[28,46,25,33,"createContext"],[28,59,25,33],[28,61,25,51],[28,62,25,52],[28,63,25,72],[28,64,25,73],[29,2,27,7],[29,11,27,16,"AuthProvider"],[29,23,27,28,"AuthProvider"],[29,24,27,29],[30,4,27,31,"children"],[31,2,27,65],[31,3,27,66],[31,5,27,68],[32,4,27,68,"_s"],[32,6,27,68],[33,4,28,2],[33,10,28,8],[33,11,28,9,"user"],[33,15,28,13],[33,17,28,15,"setUser"],[33,24,28,22],[33,25,28,23],[33,28,28,26],[33,32,28,26,"useState"],[33,38,28,34],[33,39,28,34,"useState"],[33,47,28,34],[33,49,28,48],[33,53,28,52],[33,54,28,53],[34,4,29,2],[34,10,29,8],[34,11,29,9,"token"],[34,16,29,14],[34,18,29,16,"setToken"],[34,26,29,24],[34,27,29,25],[34,30,29,28],[34,34,29,28,"useState"],[34,40,29,36],[34,41,29,36,"useState"],[34,49,29,36],[34,51,29,52],[34,55,29,56],[34,56,29,57],[35,4,30,2],[35,10,30,8],[35,11,30,9,"loading"],[35,18,30,16],[35,20,30,18,"setLoading"],[35,30,30,28],[35,31,30,29],[35,34,30,32],[35,38,30,32,"useState"],[35,44,30,40],[35,45,30,40,"useState"],[35,53,30,40],[35,55,30,41],[35,59,30,45],[35,60,30,46],[36,4,32,2],[36,8,32,2,"useEffect"],[36,14,32,11],[36,15,32,11,"useEffect"],[36,24,32,11],[36,26,32,12],[36,32,32,18],[37,6,33,4,"loadToken"],[37,15,33,13],[37,16,33,14],[37,17,33,15],[38,4,34,2],[38,5,34,3],[38,7,34,5],[38,9,34,7],[38,10,34,8],[39,4,36,2],[39,10,36,8,"loadToken"],[39,19,36,17],[39,22,36,20],[39,28,36,20,"loadToken"],[39,29,36,20],[39,34,36,32],[40,6,37,4],[40,10,37,8],[41,8,38,6],[41,14,38,12,"savedToken"],[41,24,38,22],[41,27,38,25],[41,33,38,31,"AsyncStorage"],[41,45,38,43],[41,46,38,43,"default"],[41,53,38,43],[41,54,38,44,"getItem"],[41,61,38,51],[41,62,38,52],[41,74,38,64],[41,75,38,65],[42,8,39,6],[42,12,39,10,"savedToken"],[42,22,39,20],[42,24,39,22],[43,10,40,8],[43,16,40,14,"res"],[43,19,40,17],[43,22,40,20],[43,28,40,26,"fetch"],[43,33,40,31],[43,34,40,32],[43,37,40,35,"BACKEND_URL"],[43,48,40,46],[43,62,40,60],[43,64,40,62],[44,12,41,10,"headers"],[44,19,41,17],[44,21,41,19],[45,14,41,21],[45,29,41,36],[45,31,41,38],[45,41,41,48,"savedToken"],[45,51,41,58],[46,12,41,61],[47,10,42,8],[47,11,42,9],[47,12,42,10],[48,10,43,8],[48,14,43,12,"res"],[48,17,43,15],[48,18,43,16,"ok"],[48,20,43,18],[48,22,43,20],[49,12,44,10],[49,18,44,16,"userData"],[49,26,44,24],[49,29,44,27],[49,35,44,33,"res"],[49,38,44,36],[49,39,44,37,"json"],[49,43,44,41],[49,44,44,42],[49,45,44,43],[50,12,45,10,"setUser"],[50,19,45,17],[50,20,45,18,"userData"],[50,28,45,26],[50,29,45,27],[51,12,46,10,"setToken"],[51,20,46,18],[51,21,46,19,"savedToken"],[51,31,46,29],[51,32,46,30],[52,10,47,8],[52,11,47,9],[52,17,47,15],[53,12,48,10],[53,18,48,16,"AsyncStorage"],[53,30,48,28],[53,31,48,28,"default"],[53,38,48,28],[53,39,48,29,"removeItem"],[53,49,48,39],[53,50,48,40],[53,62,48,52],[53,63,48,53],[54,10,49,8],[55,8,50,6],[56,6,51,4],[56,7,51,5],[56,8,51,6],[56,15,51,13,"e"],[56,16,51,14],[56,18,51,16],[57,8,52,6,"console"],[57,15,52,13],[57,16,52,14,"log"],[57,19,52,17],[57,20,52,18],[57,39,52,37],[57,41,52,39,"e"],[57,42,52,40],[57,43,52,41],[58,6,53,4],[58,7,53,5],[58,16,53,14],[59,8,54,6,"setLoading"],[59,18,54,16],[59,19,54,17],[59,24,54,22],[59,25,54,23],[60,6,55,4],[61,4,56,2],[61,5,56,3],[62,4,58,2],[62,10,58,8,"login"],[62,15,58,13],[62,18,58,16],[62,24,58,16,"login"],[62,25,58,23,"email"],[62,30,58,36],[62,32,58,38,"password"],[62,40,58,54],[62,45,58,59],[63,6,59,4],[63,12,59,10,"res"],[63,15,59,13],[63,18,59,16],[63,24,59,22,"fetch"],[63,29,59,27],[63,30,59,28],[63,33,59,31,"BACKEND_URL"],[63,44,59,42],[63,61,59,59],[63,63,59,61],[64,8,60,6,"method"],[64,14,60,12],[64,16,60,14],[64,22,60,20],[65,8,61,6,"headers"],[65,15,61,13],[65,17,61,15],[66,10,61,17],[66,24,61,31],[66,26,61,33],[67,8,61,52],[67,9,61,53],[68,8,62,6,"body"],[68,12,62,10],[68,14,62,12,"JSON"],[68,18,62,16],[68,19,62,17,"stringify"],[68,28,62,26],[68,29,62,27],[69,10,62,29,"email"],[69,15,62,34],[70,10,62,36,"password"],[71,8,62,45],[71,9,62,46],[72,6,63,4],[72,7,63,5],[72,8,63,6],[73,6,64,4],[73,10,64,8],[73,11,64,9,"res"],[73,14,64,12],[73,15,64,13,"ok"],[73,17,64,15],[73,19,64,17],[74,8,65,6],[74,14,65,12,"err"],[74,17,65,15],[74,20,65,18],[74,26,65,24,"res"],[74,29,65,27],[74,30,65,28,"json"],[74,34,65,32],[74,35,65,33],[74,36,65,34],[75,8,66,6],[75,14,66,12],[75,18,66,16,"Error"],[75,23,66,21],[75,24,66,22,"err"],[75,27,66,25],[75,28,66,26,"detail"],[75,34,66,32],[75,38,66,36],[75,52,66,50],[75,53,66,51],[76,6,67,4],[77,6,68,4],[77,12,68,10,"data"],[77,16,68,14],[77,19,68,17],[77,25,68,23,"res"],[77,28,68,26],[77,29,68,27,"json"],[77,33,68,31],[77,34,68,32],[77,35,68,33],[78,6,69,4],[78,12,69,10,"AsyncStorage"],[78,24,69,22],[78,25,69,22,"default"],[78,32,69,22],[78,33,69,23,"setItem"],[78,40,69,30],[78,41,69,31],[78,53,69,43],[78,55,69,45,"data"],[78,59,69,49],[78,60,69,50,"token"],[78,65,69,55],[78,66,69,56],[79,6,70,4,"setToken"],[79,14,70,12],[79,15,70,13,"data"],[79,19,70,17],[79,20,70,18,"token"],[79,25,70,23],[79,26,70,24],[80,6,71,4,"setUser"],[80,13,71,11],[80,14,71,12,"data"],[80,18,71,16],[80,19,71,17,"user"],[80,23,71,21],[80,24,71,22],[81,4,72,2],[81,5,72,3],[82,4,74,2],[82,10,74,8,"register"],[82,18,74,16],[82,21,74,19],[82,27,74,19,"register"],[82,28,74,26,"name"],[82,32,74,38],[82,34,74,40,"email"],[82,39,74,53],[82,41,74,55,"password"],[82,49,74,71],[82,54,74,76],[83,6,75,4],[83,12,75,10,"res"],[83,15,75,13],[83,18,75,16],[83,24,75,22,"fetch"],[83,29,75,27],[83,30,75,28],[83,33,75,31,"BACKEND_URL"],[83,44,75,42],[83,64,75,62],[83,66,75,64],[84,8,76,6,"method"],[84,14,76,12],[84,16,76,14],[84,22,76,20],[85,8,77,6,"headers"],[85,15,77,13],[85,17,77,15],[86,10,77,17],[86,24,77,31],[86,26,77,33],[87,8,77,52],[87,9,77,53],[88,8,78,6,"body"],[88,12,78,10],[88,14,78,12,"JSON"],[88,18,78,16],[88,19,78,17,"stringify"],[88,28,78,26],[88,29,78,27],[89,10,78,29,"name"],[89,14,78,33],[90,10,78,35,"email"],[90,15,78,40],[91,10,78,42,"password"],[91,18,78,50],[92,10,78,52,"role"],[92,14,78,56],[92,16,78,58],[93,8,78,68],[93,9,78,69],[94,6,79,4],[94,7,79,5],[94,8,79,6],[95,6,80,4],[95,10,80,8],[95,11,80,9,"res"],[95,14,80,12],[95,15,80,13,"ok"],[95,17,80,15],[95,19,80,17],[96,8,81,6],[96,14,81,12,"err"],[96,17,81,15],[96,20,81,18],[96,26,81,24,"res"],[96,29,81,27],[96,30,81,28,"json"],[96,34,81,32],[96,35,81,33],[96,36,81,34],[97,8,82,6],[97,14,82,12],[97,18,82,16,"Error"],[97,23,82,21],[97,24,82,22,"err"],[97,27,82,25],[97,28,82,26,"detail"],[97,34,82,32],[97,38,82,36],[97,59,82,57],[97,60,82,58],[98,6,83,4],[99,6,84,4],[99,12,84,10,"data"],[99,16,84,14],[99,19,84,17],[99,25,84,23,"res"],[99,28,84,26],[99,29,84,27,"json"],[99,33,84,31],[99,34,84,32],[99,35,84,33],[100,6,85,4],[100,12,85,10,"AsyncStorage"],[100,24,85,22],[100,25,85,22,"default"],[100,32,85,22],[100,33,85,23,"setItem"],[100,40,85,30],[100,41,85,31],[100,53,85,43],[100,55,85,45,"data"],[100,59,85,49],[100,60,85,50,"token"],[100,65,85,55],[100,66,85,56],[101,6,86,4,"setToken"],[101,14,86,12],[101,15,86,13,"data"],[101,19,86,17],[101,20,86,18,"token"],[101,25,86,23],[101,26,86,24],[102,6,87,4,"setUser"],[102,13,87,11],[102,14,87,12,"data"],[102,18,87,16],[102,19,87,17,"user"],[102,23,87,21],[102,24,87,22],[103,4,88,2],[103,5,88,3],[104,4,90,2],[104,10,90,8,"logout"],[104,16,90,14],[104,19,90,17],[104,25,90,17,"logout"],[104,26,90,17],[104,31,90,29],[105,6,91,4],[105,12,91,10,"AsyncStorage"],[105,24,91,22],[105,25,91,22,"default"],[105,32,91,22],[105,33,91,23,"removeItem"],[105,43,91,33],[105,44,91,34],[105,56,91,46],[105,57,91,47],[106,6,92,4,"setToken"],[106,14,92,12],[106,15,92,13],[106,19,92,17],[106,20,92,18],[107,6,93,4,"setUser"],[107,13,93,11],[107,14,93,12],[107,18,93,16],[107,19,93,17],[108,4,94,2],[108,5,94,3],[109,4,96,2],[109,24,97,4],[109,28,97,4,"_reactJsxDevRuntime"],[109,47,97,4],[109,48,97,4,"jsxDEV"],[109,54,97,4],[109,56,97,5,"AuthContext"],[109,67,97,16],[109,68,97,17,"Provider"],[109,76,97,25],[110,6,97,26,"value"],[110,11,97,31],[110,13,97,33],[111,8,97,35,"user"],[111,12,97,39],[112,8,97,41,"token"],[112,13,97,46],[113,8,97,48,"loading"],[113,15,97,55],[114,8,97,57,"login"],[114,13,97,62],[115,8,97,64,"register"],[115,16,97,72],[116,8,97,74,"logout"],[117,6,97,81],[117,7,97,83],[118,6,97,83,"children"],[118,14,97,83],[118,16,98,7,"children"],[119,4,98,15],[120,6,98,15,"fileName"],[120,14,98,15],[120,16,98,15,"_jsxFileName"],[120,28,98,15],[121,6,98,15,"lineNumber"],[121,16,98,15],[122,6,98,15,"columnNumber"],[122,18,98,15],[123,4,98,15],[123,11,99,26],[123,12,99,27],[124,2,101,0],[125,2,101,1,"_s"],[125,4,101,1],[125,5,27,16,"AuthProvider"],[125,17,27,28],[126,2,27,28,"_c"],[126,4,27,28],[126,7,27,16,"AuthProvider"],[126,19,27,28],[127,2,103,7],[127,8,103,13,"useAuth"],[127,15,103,20],[127,18,103,23,"useAuth"],[127,19,103,23],[128,4,103,23,"_s2"],[128,7,103,23],[129,4,103,23],[129,11,103,29],[129,15,103,29,"useContext"],[129,21,103,39],[129,22,103,39,"useContext"],[129,32,103,39],[129,34,103,40,"AuthContext"],[129,45,103,51],[129,46,103,52],[130,2,103,52],[131,2,103,53,"_s2"],[131,5,103,53],[131,6,103,13,"useAuth"],[131,13,103,20],[132,2,103,20],[132,6,103,20,"_c"],[132,8,103,20],[133,2,103,20,"$RefreshReg$"],[133,14,103,20],[133,15,103,20,"_c"],[133,17,103,20],[134,0,103,20],[134,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadToken","login","register","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;oBEE;GFoB;gBGE;GHc;mBIE;GJc;iBKE;GLI;CDO;uBOE,6BP"},"hasCjsExports":false},"type":"js/module"}]}