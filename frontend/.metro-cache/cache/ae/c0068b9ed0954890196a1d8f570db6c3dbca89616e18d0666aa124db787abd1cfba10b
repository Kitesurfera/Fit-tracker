{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({});\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadToken();\n    }, []);\n    const loadToken = async () => {\n      try {\n        const savedToken = await AsyncStorage.default.getItem('auth_token');\n        if (savedToken) {\n          const res = await fetch(`${BACKEND_URL}/api/auth/me`, {\n            headers: {\n              'Authorization': `Bearer ${savedToken}`\n            }\n          });\n          if (res.ok) {\n            const userData = await res.json();\n            setUser(userData);\n            setToken(savedToken);\n          } else {\n            await AsyncStorage.default.removeItem('auth_token');\n          }\n        }\n      } catch (e) {\n        console.log('Load token error:', e);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const res = await fetch(`${BACKEND_URL}/api/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) {\n        const err = await res.json();\n        throw new Error(err.detail || 'Login failed');\n      }\n      const data = await res.json();\n      await AsyncStorage.default.setItem('auth_token', data.token);\n      setToken(data.token);\n      setUser(data.user);\n    };\n    const register = async (name, email, password) => {\n      const res = await fetch(`${BACKEND_URL}/api/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name,\n          email,\n          password,\n          role: 'trainer'\n        })\n      });\n      if (!res.ok) {\n        const err = await res.json();\n        throw new Error(err.detail || 'Registration failed');\n      }\n      const data = await res.json();\n      await AsyncStorage.default.setItem('auth_token', data.token);\n      setToken(data.token);\n      setUser(data.user);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }, this);\n  }\n  const useAuth = () => (0, _react.useContext)(AuthContext);\n});","lineCount":122,"map":[[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"AuthProvider"],[13,22,27,0],[13,25,27,0,"AuthProvider"],[13,37,27,0],[14,2,103,0,"Object"],[14,8,103,0],[14,9,103,0,"defineProperty"],[14,23,103,0],[14,24,103,0,"exports"],[14,31,103,0],[15,4,103,0,"enumerable"],[15,14,103,0],[16,4,103,0,"get"],[16,7,103,0],[16,18,103,0,"get"],[16,19,103,0],[17,6,103,0],[17,13,103,0,"useAuth"],[17,20,103,0],[18,4,103,0],[19,2,103,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,42,2,0],[21,45,2,0,"require"],[21,52,2,0],[21,53,2,0,"_dependencyMap"],[21,67,2,0],[22,2,2,0],[22,6,2,0,"AsyncStorage"],[22,18,2,0],[22,21,2,0,"_interopDefault"],[22,36,2,0],[22,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,73,2,0],[23,2,2,69],[23,6,2,69,"_reactJsxDevRuntime"],[23,25,2,69],[23,28,2,69,"require"],[23,35,2,69],[23,36,2,69,"_dependencyMap"],[23,50,2,69],[24,2,4,0],[24,8,4,6,"BACKEND_URL"],[24,19,4,17],[24,22,4,20,"process"],[24,29,4,27],[24,30,4,28,"env"],[24,33,4,31],[24,34,4,32,"EXPO_PUBLIC_BACKEND_URL"],[24,57,4,55],[25,2,25,0],[25,8,25,6,"AuthContext"],[25,19,25,17],[25,35,25,20],[25,39,25,20,"createContext"],[25,45,25,33],[25,46,25,33,"createContext"],[25,59,25,33],[25,61,25,51],[25,62,25,52],[25,63,25,72],[25,64,25,73],[26,2,27,7],[26,11,27,16,"AuthProvider"],[26,23,27,28,"AuthProvider"],[26,24,27,29],[27,4,27,31,"children"],[28,2,27,65],[28,3,27,66],[28,5,27,68],[29,4,28,2],[29,10,28,8],[29,11,28,9,"user"],[29,15,28,13],[29,17,28,15,"setUser"],[29,24,28,22],[29,25,28,23],[29,28,28,26],[29,32,28,26,"useState"],[29,38,28,34],[29,39,28,34,"useState"],[29,47,28,34],[29,49,28,48],[29,53,28,52],[29,54,28,53],[30,4,29,2],[30,10,29,8],[30,11,29,9,"token"],[30,16,29,14],[30,18,29,16,"setToken"],[30,26,29,24],[30,27,29,25],[30,30,29,28],[30,34,29,28,"useState"],[30,40,29,36],[30,41,29,36,"useState"],[30,49,29,36],[30,51,29,52],[30,55,29,56],[30,56,29,57],[31,4,30,2],[31,10,30,8],[31,11,30,9,"loading"],[31,18,30,16],[31,20,30,18,"setLoading"],[31,30,30,28],[31,31,30,29],[31,34,30,32],[31,38,30,32,"useState"],[31,44,30,40],[31,45,30,40,"useState"],[31,53,30,40],[31,55,30,41],[31,59,30,45],[31,60,30,46],[32,4,32,2],[32,8,32,2,"useEffect"],[32,14,32,11],[32,15,32,11,"useEffect"],[32,24,32,11],[32,26,32,12],[32,32,32,18],[33,6,33,4,"loadToken"],[33,15,33,13],[33,16,33,14],[33,17,33,15],[34,4,34,2],[34,5,34,3],[34,7,34,5],[34,9,34,7],[34,10,34,8],[35,4,36,2],[35,10,36,8,"loadToken"],[35,19,36,17],[35,22,36,20],[35,28,36,20,"loadToken"],[35,29,36,20],[35,34,36,32],[36,6,37,4],[36,10,37,8],[37,8,38,6],[37,14,38,12,"savedToken"],[37,24,38,22],[37,27,38,25],[37,33,38,31,"AsyncStorage"],[37,45,38,43],[37,46,38,43,"default"],[37,53,38,43],[37,54,38,44,"getItem"],[37,61,38,51],[37,62,38,52],[37,74,38,64],[37,75,38,65],[38,8,39,6],[38,12,39,10,"savedToken"],[38,22,39,20],[38,24,39,22],[39,10,40,8],[39,16,40,14,"res"],[39,19,40,17],[39,22,40,20],[39,28,40,26,"fetch"],[39,33,40,31],[39,34,40,32],[39,37,40,35,"BACKEND_URL"],[39,48,40,46],[39,62,40,60],[39,64,40,62],[40,12,41,10,"headers"],[40,19,41,17],[40,21,41,19],[41,14,41,21],[41,29,41,36],[41,31,41,38],[41,41,41,48,"savedToken"],[41,51,41,58],[42,12,41,61],[43,10,42,8],[43,11,42,9],[43,12,42,10],[44,10,43,8],[44,14,43,12,"res"],[44,17,43,15],[44,18,43,16,"ok"],[44,20,43,18],[44,22,43,20],[45,12,44,10],[45,18,44,16,"userData"],[45,26,44,24],[45,29,44,27],[45,35,44,33,"res"],[45,38,44,36],[45,39,44,37,"json"],[45,43,44,41],[45,44,44,42],[45,45,44,43],[46,12,45,10,"setUser"],[46,19,45,17],[46,20,45,18,"userData"],[46,28,45,26],[46,29,45,27],[47,12,46,10,"setToken"],[47,20,46,18],[47,21,46,19,"savedToken"],[47,31,46,29],[47,32,46,30],[48,10,47,8],[48,11,47,9],[48,17,47,15],[49,12,48,10],[49,18,48,16,"AsyncStorage"],[49,30,48,28],[49,31,48,28,"default"],[49,38,48,28],[49,39,48,29,"removeItem"],[49,49,48,39],[49,50,48,40],[49,62,48,52],[49,63,48,53],[50,10,49,8],[51,8,50,6],[52,6,51,4],[52,7,51,5],[52,8,51,6],[52,15,51,13,"e"],[52,16,51,14],[52,18,51,16],[53,8,52,6,"console"],[53,15,52,13],[53,16,52,14,"log"],[53,19,52,17],[53,20,52,18],[53,39,52,37],[53,41,52,39,"e"],[53,42,52,40],[53,43,52,41],[54,6,53,4],[54,7,53,5],[54,16,53,14],[55,8,54,6,"setLoading"],[55,18,54,16],[55,19,54,17],[55,24,54,22],[55,25,54,23],[56,6,55,4],[57,4,56,2],[57,5,56,3],[58,4,58,2],[58,10,58,8,"login"],[58,15,58,13],[58,18,58,16],[58,24,58,16,"login"],[58,25,58,23,"email"],[58,30,58,36],[58,32,58,38,"password"],[58,40,58,54],[58,45,58,59],[59,6,59,4],[59,12,59,10,"res"],[59,15,59,13],[59,18,59,16],[59,24,59,22,"fetch"],[59,29,59,27],[59,30,59,28],[59,33,59,31,"BACKEND_URL"],[59,44,59,42],[59,61,59,59],[59,63,59,61],[60,8,60,6,"method"],[60,14,60,12],[60,16,60,14],[60,22,60,20],[61,8,61,6,"headers"],[61,15,61,13],[61,17,61,15],[62,10,61,17],[62,24,61,31],[62,26,61,33],[63,8,61,52],[63,9,61,53],[64,8,62,6,"body"],[64,12,62,10],[64,14,62,12,"JSON"],[64,18,62,16],[64,19,62,17,"stringify"],[64,28,62,26],[64,29,62,27],[65,10,62,29,"email"],[65,15,62,34],[66,10,62,36,"password"],[67,8,62,45],[67,9,62,46],[68,6,63,4],[68,7,63,5],[68,8,63,6],[69,6,64,4],[69,10,64,8],[69,11,64,9,"res"],[69,14,64,12],[69,15,64,13,"ok"],[69,17,64,15],[69,19,64,17],[70,8,65,6],[70,14,65,12,"err"],[70,17,65,15],[70,20,65,18],[70,26,65,24,"res"],[70,29,65,27],[70,30,65,28,"json"],[70,34,65,32],[70,35,65,33],[70,36,65,34],[71,8,66,6],[71,14,66,12],[71,18,66,16,"Error"],[71,23,66,21],[71,24,66,22,"err"],[71,27,66,25],[71,28,66,26,"detail"],[71,34,66,32],[71,38,66,36],[71,52,66,50],[71,53,66,51],[72,6,67,4],[73,6,68,4],[73,12,68,10,"data"],[73,16,68,14],[73,19,68,17],[73,25,68,23,"res"],[73,28,68,26],[73,29,68,27,"json"],[73,33,68,31],[73,34,68,32],[73,35,68,33],[74,6,69,4],[74,12,69,10,"AsyncStorage"],[74,24,69,22],[74,25,69,22,"default"],[74,32,69,22],[74,33,69,23,"setItem"],[74,40,69,30],[74,41,69,31],[74,53,69,43],[74,55,69,45,"data"],[74,59,69,49],[74,60,69,50,"token"],[74,65,69,55],[74,66,69,56],[75,6,70,4,"setToken"],[75,14,70,12],[75,15,70,13,"data"],[75,19,70,17],[75,20,70,18,"token"],[75,25,70,23],[75,26,70,24],[76,6,71,4,"setUser"],[76,13,71,11],[76,14,71,12,"data"],[76,18,71,16],[76,19,71,17,"user"],[76,23,71,21],[76,24,71,22],[77,4,72,2],[77,5,72,3],[78,4,74,2],[78,10,74,8,"register"],[78,18,74,16],[78,21,74,19],[78,27,74,19,"register"],[78,28,74,26,"name"],[78,32,74,38],[78,34,74,40,"email"],[78,39,74,53],[78,41,74,55,"password"],[78,49,74,71],[78,54,74,76],[79,6,75,4],[79,12,75,10,"res"],[79,15,75,13],[79,18,75,16],[79,24,75,22,"fetch"],[79,29,75,27],[79,30,75,28],[79,33,75,31,"BACKEND_URL"],[79,44,75,42],[79,64,75,62],[79,66,75,64],[80,8,76,6,"method"],[80,14,76,12],[80,16,76,14],[80,22,76,20],[81,8,77,6,"headers"],[81,15,77,13],[81,17,77,15],[82,10,77,17],[82,24,77,31],[82,26,77,33],[83,8,77,52],[83,9,77,53],[84,8,78,6,"body"],[84,12,78,10],[84,14,78,12,"JSON"],[84,18,78,16],[84,19,78,17,"stringify"],[84,28,78,26],[84,29,78,27],[85,10,78,29,"name"],[85,14,78,33],[86,10,78,35,"email"],[86,15,78,40],[87,10,78,42,"password"],[87,18,78,50],[88,10,78,52,"role"],[88,14,78,56],[88,16,78,58],[89,8,78,68],[89,9,78,69],[90,6,79,4],[90,7,79,5],[90,8,79,6],[91,6,80,4],[91,10,80,8],[91,11,80,9,"res"],[91,14,80,12],[91,15,80,13,"ok"],[91,17,80,15],[91,19,80,17],[92,8,81,6],[92,14,81,12,"err"],[92,17,81,15],[92,20,81,18],[92,26,81,24,"res"],[92,29,81,27],[92,30,81,28,"json"],[92,34,81,32],[92,35,81,33],[92,36,81,34],[93,8,82,6],[93,14,82,12],[93,18,82,16,"Error"],[93,23,82,21],[93,24,82,22,"err"],[93,27,82,25],[93,28,82,26,"detail"],[93,34,82,32],[93,38,82,36],[93,59,82,57],[93,60,82,58],[94,6,83,4],[95,6,84,4],[95,12,84,10,"data"],[95,16,84,14],[95,19,84,17],[95,25,84,23,"res"],[95,28,84,26],[95,29,84,27,"json"],[95,33,84,31],[95,34,84,32],[95,35,84,33],[96,6,85,4],[96,12,85,10,"AsyncStorage"],[96,24,85,22],[96,25,85,22,"default"],[96,32,85,22],[96,33,85,23,"setItem"],[96,40,85,30],[96,41,85,31],[96,53,85,43],[96,55,85,45,"data"],[96,59,85,49],[96,60,85,50,"token"],[96,65,85,55],[96,66,85,56],[97,6,86,4,"setToken"],[97,14,86,12],[97,15,86,13,"data"],[97,19,86,17],[97,20,86,18,"token"],[97,25,86,23],[97,26,86,24],[98,6,87,4,"setUser"],[98,13,87,11],[98,14,87,12,"data"],[98,18,87,16],[98,19,87,17,"user"],[98,23,87,21],[98,24,87,22],[99,4,88,2],[99,5,88,3],[100,4,90,2],[100,10,90,8,"logout"],[100,16,90,14],[100,19,90,17],[100,25,90,17,"logout"],[100,26,90,17],[100,31,90,29],[101,6,91,4],[101,12,91,10,"AsyncStorage"],[101,24,91,22],[101,25,91,22,"default"],[101,32,91,22],[101,33,91,23,"removeItem"],[101,43,91,33],[101,44,91,34],[101,56,91,46],[101,57,91,47],[102,6,92,4,"setToken"],[102,14,92,12],[102,15,92,13],[102,19,92,17],[102,20,92,18],[103,6,93,4,"setUser"],[103,13,93,11],[103,14,93,12],[103,18,93,16],[103,19,93,17],[104,4,94,2],[104,5,94,3],[105,4,96,2],[105,24,97,4],[105,28,97,4,"_reactJsxDevRuntime"],[105,47,97,4],[105,48,97,4,"jsxDEV"],[105,54,97,4],[105,56,97,5,"AuthContext"],[105,67,97,16],[105,68,97,17,"Provider"],[105,76,97,25],[106,6,97,26,"value"],[106,11,97,31],[106,13,97,33],[107,8,97,35,"user"],[107,12,97,39],[108,8,97,41,"token"],[108,13,97,46],[109,8,97,48,"loading"],[109,15,97,55],[110,8,97,57,"login"],[110,13,97,62],[111,8,97,64,"register"],[111,16,97,72],[112,8,97,74,"logout"],[113,6,97,81],[113,7,97,83],[114,6,97,83,"children"],[114,14,97,83],[114,16,98,7,"children"],[115,4,98,15],[116,6,98,15,"fileName"],[116,14,98,15],[116,16,98,15,"_jsxFileName"],[116,28,98,15],[117,6,98,15,"lineNumber"],[117,16,98,15],[118,6,98,15,"columnNumber"],[118,18,98,15],[119,4,98,15],[119,11,99,26],[119,12,99,27],[120,2,101,0],[121,2,103,7],[121,8,103,13,"useAuth"],[121,15,103,20],[121,18,103,23,"useAuth"],[121,19,103,23],[121,24,103,29],[121,28,103,29,"useContext"],[121,34,103,39],[121,35,103,39,"useContext"],[121,45,103,39],[121,47,103,40,"AuthContext"],[121,58,103,51],[121,59,103,52],[122,0,103,53],[122,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadToken","login","register","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;oBEE;GFoB;gBGE;GHc;mBIE;GJc;iBKE;GLI;CDO;uBOE,6BP"},"hasCjsExports":false},"type":"js/module"}]}